# ==========================================
# ğŸ“Š CiÃªncia de Dados com Python - Alura
# ==========================================

# 1ï¸âƒ£ ImportaÃ§Ã£o das bibliotecas
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# ==========================================
# 2ï¸âƒ£ Coleta de dados (simulaÃ§Ã£o de formulÃ¡rio)
# Suponha que vocÃª criou um formulÃ¡rio Google Forms com perguntas como:
# Nome, Idade, Cidade, Nota em MatemÃ¡tica, Nota em PortuguÃªs
# Vamos criar um conjunto de dados fictÃ­cio (como se viesse do Forms)
# ==========================================

dados = {
    "Nome": ["Ana", "Bruno", "Carla", "Diego", "Eduarda", "Felipe", "Giovana", "Heitor"],
    "Idade": [17, 16, 18, 17, 16, 18, 17, 16],
    "Cidade": ["SÃ£o Paulo", "Rio de Janeiro", "Curitiba", "SÃ£o Paulo", "Recife", "Recife", "Curitiba", "SÃ£o Paulo"],
    "Nota_Matematica": [8.5, 7.0, 9.0, 6.5, 7.5, 8.0, 9.5, 6.0],
    "Nota_Portugues": [9.0, 6.5, 8.0, 7.5, 7.0, 8.5, 9.0, 6.5]
}

df = pd.DataFrame(dados)

# Exibe as primeiras linhas
print("ğŸ“‹ Dados coletados:")
print(df.head())

# ==========================================
# 3ï¸âƒ£ Salvar e publicar tabela em formato CSV
# ==========================================
df.to_csv("dados_estudantes.csv", index=False)
print("\nâœ… Tabela salva como 'dados_estudantes.csv'")

# ==========================================
# 4ï¸âƒ£ EstatÃ­sticas descritivas
# ==========================================
print("\nğŸ“ˆ EstatÃ­sticas descritivas:")
print(df.describe())

# MÃ©dia das notas
media_matematica = df["Nota_Matematica"].mean()
media_portugues = df["Nota_Portugues"].mean()
print(f"\nğŸ“Š MÃ©dia MatemÃ¡tica: {media_matematica:.2f}")
print(f"ğŸ“Š MÃ©dia PortuguÃªs: {media_portugues:.2f}")

# ==========================================
# 5ï¸âƒ£ VisualizaÃ§Ã£o dos dados com grÃ¡ficos
# ==========================================

# GrÃ¡fico de barras: notas por aluno
plt.figure(figsize=(8,4))
sns.barplot(data=df, x="Nome", y="Nota_Matematica", color="skyblue", label="MatemÃ¡tica")
sns.barplot(data=df, x="Nome", y="Nota_Portugues", color="orange", alpha=0.6, label="PortuguÃªs")
plt.title("Notas por aluno")
plt.legend()
plt.show()

# GrÃ¡fico de dispersÃ£o: correlaÃ§Ã£o entre as duas notas
plt.figure(figsize=(6,4))
sns.scatterplot(data=df, x="Nota_Matematica", y="Nota_Portugues", hue="Cidade", s=100)
plt.title("CorrelaÃ§Ã£o entre MatemÃ¡tica e PortuguÃªs")
plt.show()

# ==========================================
# 6ï¸âƒ£ Comparando com base externa (simulada)
# ==========================================
# Base externa: mÃ©dia nacional das notas
media_nacional = pd.DataFrame({
    "Disciplina": ["MatemÃ¡tica", "PortuguÃªs"],
    "MÃ©dia_Nacional": [7.2, 7.5]
})

# Tabela comparando as mÃ©dias
comparativo = pd.DataFrame({
    "Disciplina": ["MatemÃ¡tica", "PortuguÃªs"],
    "MÃ©dia_Turma": [media_matematica, media_portugues],
}).merge(media_nacional, on="Disciplina")

print("\nğŸ“Š Comparativo com mÃ©dia nacional:")
print(comparativo)

# GrÃ¡fico comparativo
plt.figure(figsize=(6,4))
sns.barplot(data=comparativo.melt(id_vars="Disciplina"), x="Disciplina", y="value", hue="variable")
plt.title("Comparativo: Turma x MÃ©dia Nacional")
plt.ylabel("MÃ©dia das Notas")
plt.show()
